import{Q as m}from"./QInput.286e18dc.js";import{Q as H,a as ne}from"./QVirtualScroll.69496eb3.js";import{q as n,Y as ie,z as ue,r as re,o as p,c as A,a as e,w as l,al as b,b as o,$ as N,a1 as u,a7 as D,F as K,v,a3 as V,aH as de,aI as me,a4 as r,P as g,t as c,a6 as h,aJ as f,aK as Y,a2 as F,b7 as pe,b4 as ce,Z,p as fe,e as ye}from"./index.cde20d85.js";import{Q as w}from"./QItemLabel.45906cc2.js";import{Q as be}from"./QOptionGroup.8683911c.js";import{Q as X}from"./rtl.61fc98d8.js";import{Q as q}from"./QCardActions.4f2104f5.js";import{Q as ve,a as ee}from"./QTabs.d6390e2c.js";import{Q as ge,a as L}from"./QTr.0e196550.js";import{Q as he}from"./QTable.2e14d786.js";import{C as M}from"./ClosePopup.26502a4c.js";import{u as xe}from"./use-quasar.c0324529.js";import{_ as _e}from"./plugin-vue_export-helper.21dcd24c.js";import"./uid.937d8ee7.js";import"./use-checkbox.d1d4d1c5.js";import"./QRadio.8c4edce2.js";const i=Q=>(fe("data-v-275ead1b"),Q=Q(),ye(),Q),Ve=i(()=>o("div",null,[o("h6",null,"Top-up your wallet")],-1)),we={style:{display:"flex","justify-content":"center"}},qe=i(()=>o("div",null,[o("h6",null,"Available: 10,000")],-1)),Qe={style:{display:"flex","justify-content":"center"}},ke=i(()=>o("h6",null,"Shop with wallet",-1)),Ce={style:{display:"flex","justify-content":"center"}},Ue=i(()=>o("h6",{class:"text-subtitle2 text-grey-9"},"Total",-1)),Ae={class:"text-h6 text-weight-semibold"},Ne=i(()=>o("div",{class:"text-h6 q-pa-sm"},"Choose Payment Method",-1)),Pe=i(()=>o("h6",{class:"text-h6 q-pa-sm"},"Authenticate Transaction",-1)),Be=i(()=>o("h6",{class:"text-subtitle2 text-grey-7"}," Use Pin to authenticate transaction ",-1)),ze=i(()=>o("h6",{class:"q-px-lg q-pt-lg"},"New Bill",-1)),Te={style:{display:"flex","justify-content":"space-between","flex-direction":"column",height:"25rem","margin-top":"10px"}},Ie=i(()=>o("h6",{class:"text-subtitle1 text-grey-8"},"Total Bills",-1)),je={class:"q-mt-sm"},$e={key:1},Se={class:"text-subtitle1 q-mt-sm flex justify-between items-center"},Ee=i(()=>o("h6",{class:"text-subtitle2 text-grey-8"}," Please pay your water bill before 22 Jul 2022 ",-1)),De=i(()=>o("h6",{class:"text-subtitle1"},"Emergency",-1)),Ke=i(()=>o("h6",{class:"text-subtitle1"},"Kes 1200",-1)),Fe={class:"q-mt-xl"},Le=["onClick"],Me={__name:"Bills-page",setup(Q){const R=n(!1),J=n(!1),O=n(null),W=n(!1),x=n(!1),k=n(!1),P=n(!1),B=n(!1),z=n(""),T=n(""),I=n(),j=n(""),$=n(""),S=ie(),y=n(null),_=n([]),G=xe(),C=n(!0),le=n("");function te(){C.value=!C.value}const E=async()=>{try{await S.fetchUserProfile(),y.value=S.currentUser,_.value=S.currentUser.bills}catch(s){console.log("Error",s)}};ue(E);const ae=async()=>{try{const s=await Z.post("/setbill",{userId:y.value.id,billName:z.value,accNumber:T.value,amount:I.value,recepientphone:j.value,recepientEmail:$.value});(s.status=200)&&(G.notify({type:"positive",message:"Bill saved successfully!"}),E())}catch{}},oe=async(s,a)=>{try{const d=await Z.post("/paybill",{billId:s,amount:a,source:"card",userId:y.value.id});(d.status=200)&&(G.notify({type:"positive",message:"Bill paid successfully!"}),E())}catch(d){console.log("Error",d)}},se=[{name:"Name",required:!0,label:"Name",align:"left",field:s=>s.Name,format:s=>`${s}`,sortable:!0},{name:"Amount",align:"center",label:"Amount",field:"Amount",sortable:!0},{name:"Actions",label:"Actions ",field:"Actions"}];return(s,a)=>{const d=re("q-card-header");return p(),A(K,null,[e(b,{modelValue:R.value,"onUpdate:modelValue":a[2]||(a[2]=t=>R.value=t),position:"bottom"},{default:l(()=>[e(u,{class:"q-pa-lg"},{default:l(()=>[Ve,e(m,{modelValue:s.text,"onUpdate:modelValue":a[0]||(a[0]=t=>s.text=t),label:"Amount"},null,8,["modelValue"]),e(H,{modelValue:s.model,"onUpdate:modelValue":a[1]||(a[1]=t=>s.model=t),options:s.options,label:"Top-up From"},null,8,["modelValue","options"]),o("div",we,[e(v,{rounded:"",label:"Top Up",color:"primary","text-color":"white",size:"14px",class:"q-mt-xl q-px-xl"})])]),_:1})]),_:1},8,["modelValue"]),e(b,{modelValue:J.value,"onUpdate:modelValue":a[5]||(a[5]=t=>J.value=t),position:"bottom"},{default:l(()=>[e(u,{class:"q-pa-lg"},{default:l(()=>[qe,e(m,{modelValue:s.text,"onUpdate:modelValue":a[3]||(a[3]=t=>s.text=t),label:"Amount",placeholder:"Ksh 1,000"},null,8,["modelValue"]),e(H,{modelValue:s.model,"onUpdate:modelValue":a[4]||(a[4]=t=>s.model=t),options:s.option,label:"Withdraw to",color:"teal",clearable:"","options-selected-class":"text-deep-orange"},{option:l(t=>[e(V,de(me(t.itemProps)),{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(g,{name:t.opt.icon},null,8,["name"])]),_:2},1024),e(r,null,{default:l(()=>[e(w,null,{default:l(()=>[c(h(t.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),o("div",Qe,[e(v,{rounded:"",label:"Withdraw",color:"primary","text-color":"white",size:"14px",class:"q-mt-xl q-px-xl"})])]),_:1})]),_:1},8,["modelValue"]),e(b,{modelValue:W.value,"onUpdate:modelValue":a[7]||(a[7]=t=>W.value=t),position:"bottom"},{default:l(()=>[e(u,{class:"q-pa-lg"},{default:l(()=>[ke,e(be,{options:s.rdio,type:"radio",modelValue:O.value,"onUpdate:modelValue":a[6]||(a[6]=t=>O.value=t)},null,8,["options","modelValue"]),o("div",Ce,[e(v,{rounded:"",label:"Proceed",color:"primary","text-color":"white",size:"14px",class:"q-mt-xl q-px-xl"})])]),_:1})]),_:1},8,["modelValue"]),e(b,{modelValue:x.value,"onUpdate:modelValue":a[10]||(a[10]=t=>x.value=t),position:"bottom"},{default:l(()=>[y.value?(p(),N(u,{key:0,style:{height:"25rem",display:"flex","flex-direction":"column","justify-content":"space-between"}},{default:l(()=>[e(f,{align:"right"},{default:l(()=>[e(g,{name:"add",size:"30px",onClick:a[8]||(a[8]=t=>B.value=!0)})]),_:1}),e(f,{class:"q-pt-none"},{default:l(()=>[e(X,{style:{height:"8rem",display:"flex","flex-direction":"column","justify-content":"space-between"}},{default:l(()=>[(p(!0),A(K,null,Y(_.value,(t,U)=>(p(),N(V,{key:U},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(g,{size:"30px",name:"money"})]),_:1}),e(r,null,{default:l(()=>[e(w,null,{default:l(()=>[c(h(t.billName),1)]),_:2},1024),e(w,{caption:""},{default:l(()=>[c("Ksh "+h(t.amount),1)]),_:2},1024)]),_:2},1024),e(r,{side:""},{default:l(()=>[e(ne)]),_:1})]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{align:"center"},{default:l(()=>[Ue,o("h6",Ae,"Ksh "+h(y.value.billTotal),1)]),_:1}),e(q,{align:"center"},{default:l(()=>[e(v,{rounded:"",style:{width:"10rem",height:"3rem","font-size":"1rem"},color:"primary",label:"Pay",onClick:a[9]||(a[9]=t=>k.value=!0)})]),_:1})]),_:1})):D("",!0)]),_:1},8,["modelValue"]),e(b,{modelValue:k.value,"onUpdate:modelValue":a[12]||(a[12]=t=>k.value=t),position:"bottom","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(u,{class:"bg-white text-black",style:{width:"300px"}},{default:l(()=>[e(d,null,{default:l(()=>[Ne]),_:1}),e(f,{class:"q-pt-none"},{default:l(()=>[e(X,{style:{height:"8rem",display:"flex","flex-direction":"column","align-items":"center","justify-content":"space-between"}},{default:l(()=>[e(V,null,{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(g,{size:"30px",name:"money"})]),_:1}),e(r,null,{default:l(()=>[e(w,null,{default:l(()=>[c("Mobile")]),_:1})]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(g,{size:"30px",name:"payment"})]),_:1}),e(r,null,{default:l(()=>[e(w,null,{default:l(()=>[c("Card")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{align:"center",class:"bg-white text-primary"},{default:l(()=>[F(e(v,{rounded:"",style:{width:"10rem",height:"2rem","font-size":"1rem"},color:"primary",label:"Pay",onClick:a[11]||(a[11]=t=>P.value=!0)},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(b,{modelValue:P.value,"onUpdate:modelValue":a[14]||(a[14]=t=>P.value=t),position:"bottom",persistent:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(u,{class:"bg-white text-black",style:{width:"300px"}},{default:l(()=>[e(d,{align:"center"},{default:l(()=>[Pe,Be]),_:1}),e(f,{class:"q-pt-none"},{default:l(()=>[e(m,{label:"OTP",mask:"****",hint:"1234"})]),_:1}),e(q,{align:"center",class:"bg-white text-primary"},{default:l(()=>[F(e(v,{rounded:"",style:{width:"10rem",height:"2rem","font-size":"1rem"},color:"primary",label:"Complete",onClick:a[13]||(a[13]=t=>{x.value=!1,k.value=!1})},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(b,{modelValue:B.value,"onUpdate:modelValue":a[20]||(a[20]=t=>B.value=t),position:"bottom"},{default:l(()=>[e(u,{style:{height:"40rem",display:"flex","flex-direction":"column","justify-content":"space-between"}},{default:l(()=>[e(d,null,{default:l(()=>[ze]),_:1}),e(f,{class:"q-pa-lg",style:{height:"30rem",display:"flex","flex-direction":"column","justify-content":"space-between"}},{default:l(()=>[e(m,{label:"Bill Name",modelValue:z.value,"onUpdate:modelValue":a[15]||(a[15]=t=>z.value=t)},null,8,["modelValue"]),e(m,{label:"Account Number",modelValue:T.value,"onUpdate:modelValue":a[16]||(a[16]=t=>T.value=t)},null,8,["modelValue"]),e(m,{label:"Amount",modelValue:I.value,"onUpdate:modelValue":a[17]||(a[17]=t=>I.value=t)},null,8,["modelValue"]),e(m,{label:"Recepient Phone(optional)",modelValue:j.value,"onUpdate:modelValue":a[18]||(a[18]=t=>j.value=t)},null,8,["modelValue"]),e(m,{label:"Recepient Email",modelValue:$.value,"onUpdate:modelValue":a[19]||(a[19]=t=>$.value=t)},null,8,["modelValue"])]),_:1}),e(q,{align:"center",class:"bg-white text-primary q-mb-lg"},{default:l(()=>[F(e(v,{rounded:"",style:{width:"10rem",height:"2rem","font-size":"1rem"},color:"primary",label:"Add Bill",onClick:ae},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o("div",Te,[y.value?(p(),N(u,{key:0,class:"my-card bg-white",style:{height:"10rem",position:"relative"}},{default:l(()=>[e(f,{align:"center"},{default:l(()=>[Ie,o("h6",je,[o("span",{class:pe([{blurred:!C.value},"q-mr-lg"])}," Ksh. "+h(y.value.billTotal),3),e(g,{name:C.value?"visibility_off":" visibility",onClick:te},null,8,["name"])])]),_:1}),e(ce,{class:"pro"}),e(q,{class:"justify-center"},{default:l(()=>[o("h6",{class:"text-subtitle2 text-primary",onClick:a[21]||(a[21]=t=>x.value=!0)}," View All ")]),_:1})]),_:1})):D("",!0),_.value?(p(),A("div",$e,[e(ve,{class:"bg-transparent q-my-lg"},{default:l(()=>[(p(!0),A(K,null,Y(_.value,(t,U)=>(p(),N(ee,{key:U,name:t.billName,icon:"timeline",label:t.billName,class:"text-grey-9 bg-transparent"},null,8,["name","label"]))),128)),e(ee,{name:"All",icon:"apps",label:"All"})]),_:1})])):D("",!0),e(u,{class:"my-card bg-warning",style:{height:"10rem"}},{default:l(()=>[e(d,{class:"q-ml-lg"},{default:l(()=>[o("h6",Se,[c(" Due Bills "),e(g,{name:"add",onClick:a[22]||(a[22]=t=>x.value=!0),size:"20px",class:"text-grey-9 bg-transparent centered q-px-sm"})]),Ee]),_:1}),e(f,{class:"q-py-none q-px-none q-ma-sm full-width bg-white"},{default:l(()=>[e(V,{class:"q-py-sm q-px-none flex justify-between",style:{width:"80%",margin:"0 auto"}},{default:l(()=>[De,Ke,o("h6",{class:"text-subtitle1 text-primary",onClick:a[23]||(a[23]=t=>x.value=!0)}," Pay ")]),_:1})]),_:1})]),_:1})]),o("div",Fe,[e(he,{rows:_.value,columns:se,"row-key":"name",flat:"",bordered:"",filter:le.value,"virtual-scroll":"",class:"q-ma-none q-pa-none"},{body:l(t=>[e(ge,{props:t},{default:l(()=>[e(L,{key:"Name",props:t},{default:l(()=>[c(h(t.row.billName),1)]),_:2},1032,["props"]),e(L,{key:"Amount",props:t},{default:l(()=>[c(h(t.row.amount),1)]),_:2},1032,["props"]),e(L,{key:"Actions",props:t},{default:l(()=>[o("h6",{onClick:U=>oe(t.row.billId,t.row.amount),class:"text-subtitle2"}," Pay ",8,Le)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])])],64)}}};var il=_e(Me,[["__scopeId","data-v-275ead1b"]]);export{il as default};
